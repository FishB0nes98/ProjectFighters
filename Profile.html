<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOBA Profile Page</title>
    <style>
        /* Global Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: Montserrat, sans-serif;
            background-color: #333333;
            color: #FFFFFF;
        }
        h2, h3 {
            font-weight: bold;
            margin-bottom: 10px;
        }
        /* Header Section */
        header {
            background-color: #03A9F4;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
       .profile-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 20px;
        }
       .profile-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        #username {
            font-size: 24px;
            color: #FFFFFF;
        }
        /* Skin Selection Area */
       .skins-container {
            padding: 40px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        #skin-select {
            width: 100%;
            padding: 10px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            background-color: #FFFFFF;
            color: #333333;
            cursor: pointer;
        }
        /* Background Selection Area */
       .background-container {
            padding: 40px;
            background-color: #FF8C00;
            border-radius: 10px;
            margin: 20px;
        }
        #background-select {
            width: 100%;
            padding: 10px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            background-color: #FFFFFF;
            color: #333333;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="profile-icon">
            <img src="" alt="Profile Icon" id="profile-icon">
        </div>
        <h2 id="username"></h2>
    </header>

    <!-- Skin Selection Area -->
    <section class="skins-container">
        <h3>Skins</h3>
        <select id="skin-select">
            <option value="">Select Skin</option>
            <!-- skins will be populated dynamically from Firebase database -->
        </select>
    </section>

    <!-- Background Selection Area -->
    <section class="background-container">
        <h3>Background</h3>
        <select id="background-select">
            <option value="">Select Background</option>
            <!-- backgrounds will be populated dynamically from Firebase database -->
        </select>
    </section>

    <script>
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCqhxq6sPDU3EmuvvkBIIDJ-H6PsBc42Jg",
            authDomain: "project-fighters-by-fishb0nes.firebaseapp.com",
            databaseURL: "https://project-fighters-by-fishb0nes-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "project-fighters-by-fishb0nes",
            storageBucket: "project-fighters-by-fishb0nes.appspot.com",
            messagingSenderId: "867339299995",
            appId: "1:867339299995:web:99c379940014b9c05cea3e",
            measurementId: "G-LNEM6HR842"
        };
        var app = firebase.initializeApp(config);

        // Get logged in user's data from Firebase Realtime Database
        var userId = firebase.auth().currentUser.uid;
        var database = firebase.database();
        var userDataRef = database.ref('users/' + userId);

        // Get profile icon and username
        userDataRef.child('profile/icon').once('value', function(data) {
            document.getElementById('profile-icon').src = data.val();
        });
        userDataRef.child('profile/username').once('value', function(data) {
            document.getElementById('username').innerText = data.val();
        });

        // Get skins from Firebase Storage
        var skinsRef = firebase.storage().ref('skins');
        skinsRef.listAll().then(function(result) {
            result.items.forEach(function(item) {
                var skinName = item.name;
                var skinOption = document.createElement('option');
                skinOption.value = skinName;
                skinOption.text = skinName;
                document.getElementById('skin-select').appendChild(skinOption);
            });
        });

        // Get backgrounds from Firebase Storage
        var backgroundsRef = firebase.storage().ref('Default Splash');
        backgroundsRef.listAll().then(function(result) {
            result.items.forEach(function(item) {
                var backgroundName = item.name;
                var backgroundOption = document.createElement('option');
                backgroundOption.value = backgroundName;
                backgroundOption.text = backgroundName;
                document.getElementById('background-select').appendChild(backgroundOption);
            });
        });

        // Save selected skin to Firebase Realtime Database
        document.getElementById('skin-select').addEventListener('change', function() {
            var selectedSkin = this.value;
            userDataRef.child('profile/skin1').set(selectedSkin);
        });

        // Save selected background to Firebase Realtime Database
        document.getElementById('background-select').addEventListener('change', function() {
            var selectedBackground = this.value;
            userDataRef.child('profile/background').set(selectedBackground);
        });
    </script>
</body>
</html>