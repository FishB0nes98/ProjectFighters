<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <!-- Include Firebase SDK and configuration -->
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js" type="module"></script>
    <script nomodule>
        // Fallback for non-module browsers (if needed)
        document.write('<script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js"><\/script>');
        document.write('<script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js"><\/script>');
        document.write('<script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js"><\/script>');
    </script>
    <script type="module">
        <script type="module">
    // Firebase configuration (same as in your script)
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js';
    import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js';
    import { getDatabase, ref, get } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js';

    const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_AUTH_DOMAIN",
        databaseURL: "YOUR_DATABASE_URL",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_STORAGE_BUCKET",
        messagingSenderId: "YOUR_SENDER_ID",
        appId: "YOUR_APP_ID",
        measurementId: "YOUR_MEASUREMENT_ID"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const database = getDatabase(app);

    // Function to load user profile based on username input
    function loadProfile() {
        const username = document.getElementById('username-input').value.trim();
        if (username === '') {
            alert('Please enter a username.');
            return;
        }

        // Query Firebase Database for the user with the given username
        const usersRef = ref(database, 'users');
        const query = usersRef.orderByChild('username').equalTo(username);

        get(query).then((snapshot) => {
            if (snapshot.exists()) {
                // User found, retrieve user data
                const userData = snapshot.val()[Object.keys(snapshot.val())[0]]; // Assuming unique username
                if (userData) {
                    console.log("User data retrieved:", userData); // Debugging line
                    // Update UI with user info
                    document.getElementById('username-display').textContent = userData.username;
                    document.getElementById('profile-image').src = `Icons/${userData.icon || 'default-icon.png'}`;
                    document.getElementById('profile-image').alt = 'Profile Icon';
                    document.getElementById('profile-info').style.display = 'flex'; // Show profile info section
                } else {
                    console.log("No user data found for username:", username); // Debugging line
                }
            } else {
                console.log("No user found for username:", username); // Debugging line
                alert('User not found. Please check the username.');
            }
        }).catch((error) => {
            console.error("Error fetching user data:", error);
            alert('Error fetching user data. Please try again later.');
        });
    }

    // Add other Firebase functions (logout, change icon, etc.) as per your requirements

</script>

    </script>
    <style>
        /* Your CSS styles */
    </style>
</head>
<body>
    <!-- Your existing HTML structure -->
    <!-- Add a form for user input -->
    <div id="user-info" style="display: flex; position: fixed; top: 20px; right: 20px;">
        <form id="username-form" onsubmit="return false;">
            <input type="text" id="username-input" placeholder="Enter your username">
            <button type="submit" onclick="loadProfile()">Load Profile</button>
        </form>
    </div>

    <!-- Display user profile information -->
    <div id="profile-info" style="display: none; position: fixed; top: 70px; right: 20px;">
        <span id="username-display"></span>
        <img id="profile-image" class="champion-image" src="Icons/default-icon.png" alt="Profile Icon">
    </div>

    <!-- Your existing HTML content -->
    <!-- Ensure you have modals, menus, and other elements as per your original design -->
</body>
</html>
