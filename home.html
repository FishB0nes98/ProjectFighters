<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Champion Selector</title>
    <!-- Include Firebase SDK and configuration as module scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js" type="module"></script>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js';
        import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js';
        import { getDatabase, ref, push, set, get, update, runTransaction } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js';
        import { quests } from './quests.js';

        const firebaseConfig = {
            apiKey: "AIzaSyCqhxq6sPDU3EmuvvkBIIDJ-H6PsBc42Jg",
            authDomain: "project-fighters-by-fishb0nes.firebaseapp.com",
            databaseURL: "https://project-fighters-by-fishb0nes-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "project-fighters-by-fishb0nes",
            storageBucket: "project-fighters-by-fishb0nes.appspot.com",
            messagingSenderId: "867339299995",
            appId: "1:867339299995:web:99c379940014b9c05cea3e",
            measurementId: "G-LNEM6HR842"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);

        window.onload = function() {
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                const userId = user.uid;
                const userRef = ref(database, `users/${userId}`);
                const snapshot = await get(userRef);
                const userData = snapshot.val();
                if (userData) {
                    document.getElementById('username-display').textContent = userData.username || user.email.split('@')[0];
                    setProfileImage(`Icons/${userData.icon || 'Julia.png'}`, `Icons/Profile/${userData.icon || 'Julia.png'}`);
                    document.getElementById('currency-amount').textContent = userData.FM || 0;
                    document.getElementById('cm-amount').textContent = userData.CM || 0;

                    // Initialize quest data if not present
                    const questsRef = ref(database, `users/${userId}/quests`);
                    const questsSnapshot = await get(questsRef);
                    const questsData = questsSnapshot.val() || {};

                    quests.forEach(quest => {
                        const questData = questsData[quest.id] || { progress: 0, completed: false, claimed: false };
                        if (!questData.claimed) {
                            displayQuest(quest, questData, userData);
                        }
                    });
                } else {
                    // If no user data is found, display all quests
                    quests.forEach(quest => {
                        displayQuest(quest, { progress: 0, completed: false, claimed: false }, {});
                    });
                }
            } else {
                console.log("User is not authenticated");
            }
        });
    };

        window.openChangeIconModal = async function() {
            const modal = document.getElementById('change-icon-modal');
            modal.style.display = 'block';

            // Load icons dynamically
            const iconList = document.getElementById('icon-list');
            iconList.innerHTML = '';

            const icons = [
                'Julia.png', 'Birdie.png', 'Erron Black.png', 'Cham Cham.png', 'Morrigan.png',
                'Jun.png', 'Reptile.png', 'Akuma.png', 'Elphelt.png', 'Kotal Kahn.png',
                'Scorpion.png', 'Peacock.png', 'Angel.png', 'Astaroth.png', 'Ibuki.png',
                'R.Mika.png', 'Raiden.png', 'Yugo.png', 'Talim.png', 'Noel.png',
                'Blanka.png', 'Nina.png', 'Ayane.png', 'Siegfried.png', 'Shoma.png', 
				'Juri.png', 'Sub Zero.png', 'Christie.png', 'Kokoro.png', 'Eagle.png',
                'Sophitia.png', 'Shizumaru.png', 'Kagome.png', 'Kabal.png', 'Kuma.png',
                'Alice.png'
				
            ];

            icons.forEach(icon => {
                const img = document.createElement('img');
                img.src = `Icons/${icon}`;
                img.alt = icon.replace('.png', '');
                img.classList.add('icon-image');
                img.onclick = () => selectIcon(icon);
                iconList.appendChild(img);
            });

            // Fetch user-specific icons from the database
            const user = auth.currentUser;
            if (user) {
                const userRef = ref(database, 'users/' + user.uid + '/Icons');
                const snapshot = await get(userRef);
                if (snapshot.exists()) {
                    const userIcons = snapshot.val();
                    for (const iconName in userIcons) {
                        if (userIcons[iconName] === 1) { // Check if the value is 1
                            const img = document.createElement('img');
                            img.src = `Icons/Profile/${iconName}.png`;
                            img.alt = iconName.replace('.png', '');
                            img.classList.add('icon-image');
                            img.onclick = () => selectIcon(iconName + '.png');
                            iconList.appendChild(img);
                        }
                    }
                }
            }
        };

        

        window.logOut = function() {
        signOut(auth).then(() => {
            console.log('User signed out successfully');
            window.location.href = 'index.html'; // Redirect to login page after sign out
        }).catch((error) => {
            console.error('Error signing out:', error);
        });
    };

        function selectIcon(icon) {
            const user = auth.currentUser;
            if (user) {
                updateIcon(icon)
                    .then(() => {
                        setProfileImage(`Icons/${icon}`, `Icons/Profile/${icon}`);
                        closeChangeIconModal();
                    })
                    .catch(error => {
                        console.error('Error updating icon:', error);
                    });
            } else {
                console.error('User not authenticated');
            }
        }

        async function updateIcon(icon) {
            const user = auth.currentUser;
            if (user) {
                const userRef = ref(database, 'users/' + user.uid);
                try {
                    const snapshot = await get(userRef);
                    if (snapshot.exists()) {
                        const userData = snapshot.val();
                        userData.icon = icon; // Update the icon field
                        await set(userRef, userData); // Write back the updated data
                        console.log('Icon updated successfully');
                    } else {
                        console.error('No user data found');
                    }
                } catch (error) {
                    console.error('Error updating icon:', error);
                }
            } else {
                console.error('User not authenticated');
            }
        }

        function setProfileImage(primaryPath, fallbackPath) {
            const img = document.getElementById('profile-image');
            img.onerror = () => {
                img.onerror = null; // Remove error handler to avoid infinite loop
                img.src = fallbackPath;
            };
            img.src = primaryPath;
        }

        window.closeChangeIconModal = function() {
            const modal = document.getElementById('change-icon-modal');
            modal.style.display = 'none';
        };

        window.toggleProfileMenu = function() {
            const profileMenu = document.getElementById('profile-menu');
            profileMenu.classList.toggle('show');
        };

        window.searchChampion = function() {
            const input = document.getElementById('search-bar').value.toLowerCase();
            const images = document.getElementsByClassName('champion-image');
            for (let i = 0; i < images.length; i++) {
                const altText = images[i].alt.toLowerCase();
                if (altText.includes(input)) {
                    images[i].style.display = '';
                } else {
                    images[i].style.display = 'none';
                }
            }
        };


        window.updateQuestProgress = async function(questId, progressIncrement = 1) {
        const user = auth.currentUser;
        if (user) {
            const userId = user.uid;
            const userRef = ref(database, `users/${userId}/quests/${questId}`);
            const snapshot = await get(userRef);
            const questData = snapshot.val() || { progress: 0, completed: false, claimed: false };
            if (!questData.completed) {
                const newProgress = (questData.progress || 0) + progressIncrement;
                if (newProgress >= quests.find(q => q.id === questId).goal) {
                    await update(userRef, { progress: newProgress, completed: true });
                } else {
                    await update(userRef, { progress: newProgress });
                }
            }
        } else {
            console.error('User not authenticated');
        }
    };

    function checkCharacterQuestProgress(team) {
        const user = auth.currentUser;
        if (user) {
            const userId = user.uid;
            const userRef = ref(database, `users/${userId}`);
            get(userRef).then(snapshot => {
                const userData = snapshot.val();
                quests.forEach(quest => {
                    if (quest.id === 'winAsSpecificCharacter' && quest.requirement(userData)) {
                        updateQuestProgress(quest.id);
                    }
                });
            });
        } else {
            console.error('User not authenticated');
        }
    }

    window.claimReward = async function(questId) {
        const user = auth.currentUser;
        if (user) {
            const userId = user.uid;
            const questRef = ref(database, `users/${userId}/quests/${questId}`);
            const snapshot = await get(questRef);
            const questData = snapshot.val();

            if (questData && !questData.claimed) {
                const quest = quests.find(q => q.id === questId);

                // Increment the reward value
                for (const rewardKey in quest.reward) {
                    const rewardRef = ref(database, `users/${userId}/${rewardKey}`);
                    await runTransaction(rewardRef, (currentValue) => {
                        return (currentValue || 0) + quest.reward[rewardKey];
                    });
                }

                await update(questRef, { completed: true, claimed: true });
                alert('Reward claimed! You have received a free lootbox.');
                document.getElementById(`quest-${questId}`).remove();
            } else {
                console.log('Reward already claimed or quest data not found.');
            }
        } else {
            console.error('User not authenticated');
        }
    };

    function displayQuest(quest, questData, userData, team = []) {
        const questContainer = document.getElementById('new-quests-box').querySelector('.content');
        const questElement = document.createElement('div');
        questElement.classList.add('quest');
        questElement.dataset.id = quest.id;
        questElement.id = `quest-${quest.id}`;

        const title = document.createElement('h3');
        title.textContent = quest.title;
        questElement.appendChild(title);

        const description = document.createElement('p');
        description.textContent = quest.description;
        questElement.appendChild(description);

        const progress = document.createElement('div');
        progress.classList.add('quest-progress');
        const progressBar = document.createElement('div');
        progressBar.style.width = `${(questData.progress / quest.goal) * 100}%`;
        progressBar.textContent = `${questData.progress}/${quest.goal}`;
        progress.appendChild(progressBar);
        questElement.appendChild(progress);

        const buttonContainer = document.createElement('div');
        buttonContainer.classList.add('button-container');

        const acceptButton = document.createElement('button');
        acceptButton.id = `accept-quest-button-${quest.id}`;
        acceptButton.textContent = 'Accept Quest';
        acceptButton.onclick = () => acceptQuest(quest.id);
        buttonContainer.appendChild(acceptButton);

        const claimButton = document.createElement('button');
        claimButton.id = `claim-reward-button-${quest.id}`;
        claimButton.classList.add('claim-button');
        claimButton.textContent = 'Claim Reward';
        claimButton.style.display = questData.progress >= quest.goal ? 'block' : 'none';
        claimButton.onclick = () => claimReward(quest.id);
        buttonContainer.appendChild(claimButton);

        questElement.appendChild(buttonContainer);

        // Add reward image
        const rewardImage = document.createElement('img');
        rewardImage.src = quest.image;
        rewardImage.alt = quest.hoverText;
        rewardImage.title = quest.hoverText;
        rewardImage.classList.add('reward-image');
        questElement.appendChild(rewardImage);

        questContainer.appendChild(questElement);

        // Hide the accept button if the quest is already in the user's database
        if (questData.progress > 0 || userData.quests && userData.quests[quest.id]) {
            acceptButton.style.display = 'none';
        }

        if (quest.requirement(userData, team)) {
            updateQuestProgress(quest.id, questData.progress + 1);
        }
    }

    window.acceptQuest = function(questId) {
        const user = auth.currentUser;
        if (user) {
            const userId = user.uid;
            const userRef = ref(database, `users/${userId}/quests/${questId}`);
            set(userRef, { progress: 0, completed: false, claimed: false });
            document.getElementById(`accept-quest-button-${questId}`).style.display = 'none';
        } else {
            console.error('User not authenticated');
        }
    };


    document.addEventListener('DOMContentLoaded', (event) => {
        const toggleFriendListButton = document.getElementById("toggle-friend-list");
        const friendList = document.getElementById("friend-list");
        const addFriendButton = document.getElementById("add-friend-button");
        const friendNameInput = document.getElementById("friend-name-input");
        const friendListUL = document.getElementById("friend-list-ul");

        toggleFriendListButton.addEventListener("click", function() {
            friendList.style.display = friendList.style.display === "none" ? "block" : "none";
        });

        addFriendButton.addEventListener("click", async function() {
            const friendName = friendNameInput.value;
            if (friendName) {
                const userId = auth.currentUser.uid;
                const usersRef = ref(database, 'users');
                const snapshot = await get(usersRef);
                let friendId = null;

                snapshot.forEach(childSnapshot => {
                    const userData = childSnapshot.val();
                    if (userData.username === friendName) {
                        friendId = childSnapshot.key;
                    }
                });

                if (friendId) {
                    const friendRef = ref(database, 'users/' + userId + '/friends');
                    const newFriendRef = push(friendRef);
                    set(newFriendRef, {
                        id: friendId,
                        name: friendName
                    }).then(() => {
                        friendNameInput.value = '';
                        loadFriendList(userId);
                    }).catch((error) => {
                        console.error('Error adding friend:', error);
                    });
                } else {
                    alert('Username not found');
                }
            }
        });

        function loadFriendList(userId) {
            const friendRef = ref(database, 'users/' + userId + '/friends');
            get(friendRef).then(snapshot => {
                friendListUL.innerHTML = '';
                snapshot.forEach(childSnapshot => {
                    const friendData = childSnapshot.val();
                    loadFriendIcon(friendData.id, friendData.name);
                });
            }).catch(error => {
                console.error('Error loading friend list:', error);
            });
        }

        function loadFriendIcon(friendId, friendName) {
            const friendIconRef = ref(database, 'users/' + friendId + '/icon');
            get(friendIconRef).then(iconSnapshot => {
                const iconFilename = iconSnapshot.exists() ? iconSnapshot.val() : 'default-icon.jpg';
                const primaryIconUrl = `Icons/${iconFilename}`;
                const fallbackIconUrl = `Icons/Profile/${iconFilename}`;
                displayFriend(friendName, primaryIconUrl, fallbackIconUrl);
            }).catch(error => {
                console.error('Error loading friend icon:', error);
            });
        }

        function displayFriend(friendName, primaryIconUrl, fallbackIconUrl) {
    const li = document.createElement('li');
    li.classList.add('friend-item');

    const img = document.createElement('img');
    img.src = primaryIconUrl;
    img.alt = 'Friend Icon';
    img.classList.add('friend-icon');
    img.onerror = () => {
        img.onerror = null; // Remove error handler to avoid infinite loop
        img.src = fallbackIconUrl;
    };

    const nameLink = document.createElement('a');
    nameLink.href = `ProfileVisitor.html?username=${friendName}`;
    nameLink.textContent = friendName;
    nameLink.classList.add('friend-name');

    li.appendChild(img);
    li.appendChild(nameLink);
    friendListUL.appendChild(li);
}

        onAuthStateChanged(auth, user => {
            if (user) {
                loadFriendList(user.uid);
            }
        });
    });

    </script>
	<script src="quests.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #333333;
            color: white;
            font-family: Arial, sans-serif;
            position: relative;
            overflow: hidden;
        }
        h1 {
            text-align: center;
            font-size: 36px;
            margin-top: 100px;
        }
        #champion-selector-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 1200px;
            margin: 50px auto 20px auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            z-index: -1;
        }
        #champion-selector {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start;
            align-items: center;
            width: 100%;
            max-width: 1140px;
            margin-top: 20px;
        }
        .icon-image {
            width: 90px;
            height: 90px;
            margin: 10px;
            border: 2px solid #444;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.3s;
            position: relative;
        }
        .icon-image:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.5);
        }
        .champion-image {
            width: 90px;
            height: 90px;
            margin: 10px;
            border: 2px solid #444;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.3s;
            position: relative;
        }
        .champion-image:hover {
            transform: scale(1.1);
            box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.5);
        }
        .selected {
            border-color: gold !important;
        }
        .gray {
        filter: grayscale(100%);
    }
        #filter-container, #search-container {
            margin: 20px;
            text-align: center;
        }
        #search-container input {
            padding: 10px;
            font-size: 16px;
            width: 300px;
            border-radius: 5px;
            border: none;
        }

        /* New styles for user info */
		#user-info {
			position: flex;
			top: 0px; /* Adjust top position as needed */
			right: 0px; /* Adjust right position as needed */
		}
		#profile-info {
			display: flex;
			position: fixed;
			top: 0px;
			right: 0px;
			align-items: center;
			justify-content: flex-end; /* Align content to the right */
			background-color: rgba(0, 0, 0, 0.8);
			padding: 5px 10px;
			width: calc(100% - 340px);
			max-width: 275px;
		}

		#username-display {
			position: center;
			margin-right: 10px;
			font-size: 20px;
			color: white;
		}

		#profile-image {
			width: 85px;
			height: 85px;
			border-radius: 50%;
			margin-left: 10px; /* Adjust margin as needed */
		}
        /* Transparent Menu */
        .menu {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px 20px;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 0;
    }

    .menu-items {
        display: flex;
        justify-content: center;
        position: relative;
    }

    .menu a {
        color: white;
        text-decoration: none;
        padding: 14px 16px;
        font-family: 'Roboto', sans-serif;
        font-size: 16px;
        transition: background-color 0.3s, transform 0.3s;
    }

    .menu a:hover {
        background-color: #111;
        transform: scale(1.1);
    }

    .play-button-container {
    display: flex;
    justify-content: flex-start;
    padding: 20px;
    z-index: auto;
    position: fixed;
}

    .play-button {
        background-color: #ffbb00; /* Modern blue color */
        color: white;
        border: none;
        border-radius: 25px; /* Slightly less rounded corners for a modern look */
        font-size: 22px; /* Slightly larger font size */
        font-weight: bold;
        text-decoration: none;
        padding: 15px 40px; /* Increased padding for a more prominent button */
        transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); /* More pronounced shadow for a modern effect */
        z-index: 1; /* Ensure it is above other elements */
        top: 5px; /* Adjusted position */
        position: fixed;
    }

    .play-button:hover {
        background-color: #ff8800;  /* Slightly darker blue on hover */
        transform: scale(1.05); /* Slightly enlarge the button on hover */
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4); /* More pronounced shadow on hover */
    }


    .battlepass-button {
        position: fixed;
        top: 125px;
        left: 75px;
        background-color: transparent;
        border: none;
        cursor: pointer;
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px;
        width: 200px; /* Adjust the width as needed */
        flex-direction: column; /* Stack image and text vertically */
    }

    .battlepass-button img {
        width: 250px; /* Adjust the size as needed */
        height: 100px;
        transition: transform 0.3s, box-shadow 0.3s;
        position: absolute; /* Position image absolutely */
        z-index: -1; /* Place image behind the text */
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); /* Add shadow for a modern effect */
        border-radius: 10px; /* Slightly rounded corners for a modern look */
        animation: float 5s ease-in-out infinite; /* Add floating animation */
    }

    .battlepass-button span {
        color: #ffffff; /* MOBA game-like gold color */
        font-size: 24px; /* Slightly larger font size */
        font-weight: bold;
        margin-top: 10px; /* Adjust margin to position text */
        transition: transform 0.3s;
        z-index: 1; /* Ensure text is above the image */
        font-family: 'Bangers', cursive; /* MOBA game-like font */
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* Add shadow for a fancy effect */
        animation: float 5s ease-in-out infinite; /* Add floating animation */
    }

    .battlepass-button span:hover {
        transform: scale(1.1);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }

        #video-background {
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -1;
            filter: brightness(60%) contrast(120%);
        }

        /* Profile Menu */
        .profile-menu {
            display: none;
            position: absolute;
            top: 120px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 1001;
            width: 200px;
        }

        .profile-menu ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .profile-menu ul li {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 1px solid #555;
            transition: background-color 0.3s;
        }

        .profile-menu ul li:hover {
            background-color: #555;
        }

        .profile-menu ul li:last-child {
            border-bottom: none;
        }
		.profile-menu.show {
        display: block;
		}

        /* Quests Toggle Button */
        #quests-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        #quest-count {
            background-color: red;
            color: white;
            border-radius: 50%;
            padding: 5px 10px;
            margin-right: 10px;
            font-size: 14px;
            font-weight: bold;
        }
		.modal {
			display: none; /* Hidden by default */
			position: fixed; /* Stay in place */
			z-index: 1000; /* Sit on top */
			left: 0;
			top: 0;
			width: 100%; /* Full width */
			height: 100%; /* Full height */
			overflow: auto; /* Enable scrolling if needed */
			background-color: rgba(0, 0, 0, 0.5); /* Black with transparency */
			padding-top: 50px; /* Center modal vertically */
		}

		.modal-content {
			background-color: black;
			margin: auto;
			padding: 20px;
			border-radius: 10px;
			box-shadow: 0 0 20px rgba(0, 0, 0, 0.1); /* Soft shadow */
			max-width: 100%; /* Adjust width as needed */
			max-height: 80%; /* Adjust height as needed */
			overflow: auto; /* Enable scrolling if content exceeds dimensions */
		}

		.modal-content img {
			border-radius: 50%;
		}

		.close {
			color: #aaaaaa;
			float: right;
			font-size: 30px;
			font-weight: bold;
			line-height: 1;
		}

		.close:hover,
		.close:focus {
			color: #000;
			text-decoration: none;
			cursor: pointer;
		}

		/* Media query for responsiveness */
		@media (min-width: 1150px) {
			.modal-content {
				max-width: 1150px; /* Adjust maximum width for larger screens */
			}
        }
		.currency-container {
			position: fixed;
			top: 115px; /* Adjust top position as needed */
			right: 3px; /* Align with profile-info */
			align-items: center;
			padding: 5px 10px;
			max-width: 275px;
			z-index: 1000; /* Ensure it's above other content */
			display: flex; /* Use flexbox to align items */
			align-items: center; /* Align items vertically */
		}

		.currency-icon {
			width: 25px; /* Adjusted width for better visibility */
			height: auto; /* Maintain aspect ratio */
			margin-left: 5px;
		}
		.currency-icon img {
			width: 25px; /* Adjust the width as needed */
			height: auto; /* Maintain aspect ratio */
		}

		.currency-amount {
			font-size: 18px;
			font-weight: bold;
			color: white;
			margin-left: 5px; /* Add margin to separate from the icon */
		}
		 #unlockButton {
            position: fixed;
            bottom: 20px;
            left: 20px;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none; /* Initially hidden */
        }
		.cm-container {
			position: fixed; /* Fixed position */
			top: 150px; /* Adjust top position */
			right: 0px; /* Align with profile-info */
			align-items: center; /* Align items vertically */
			padding: 5px 10px; /* Padding around the container */
			max-width: 275px; /* Maximum width */
			z-index: 1000; /* Ensure it's above other content */
			display: flex; /* Use flexbox to align items */
		}

		.cm-icon {
			width: 25px; /* Adjusted width for the icon */
			height: auto; /* Maintain aspect ratio */
			margin-left: 5px; /* Margin between icon and amount */
		}

		.cm-icon img {
			width: 25px; /* Adjusted width for the icon image */
			height: auto; /* Maintain aspect ratio */
		}

		#cm-amount {
			color: white; /* Text color */
			margin-left: 5px; /* Add margin to separate from the icon */
		}
		#news-feed {
			position: fixed;
			top: 55px; /* Adjust based on your layout */
			left: 0;
			width: 250px; /* Adjust width as needed */
			background-color: rgba(0, 0, 0, 0.8);
			color: white;
			padding: 10px;
			box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
			z-index: 2000; /* Ensure it's above other content */
			overflow-y: auto;
			max-height: 90vh;
		}

		.news-item {
			margin-bottom: 20px;
		}

		.news-image {
			width: 20%;
			height: auto;
			border-radius: 5px;
		}

		.news-title {
			font-size: 18px;
			margin: 10px 0 5px;
		}

		.news-text {
			font-size: 14px;
		}
        #friend-list-container {
        position: fixed;
        bottom: 5px;
        right: 10px;
        background-color: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        z-index: 1000;
        width: 300px;
        max-width: 275px;
        max-height: 800px;
        overflow-y: auto;
    }

    #friend-list {
        display: none;
    }

    #friend-list ul {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }

    .friend-item {
        display: flex;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #444;
    }

    .friend-item:last-child {
        border-bottom: none;
    }

    .friend-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        margin-right: 10px;
    }

    .friend-name {
    color: inherit; /* Inherit the color from the parent element */
    text-decoration: none; /* Remove underline */
    cursor: pointer; /* Change cursor to pointer */
}

.friend-name:hover {
    text-decoration: underline; /* Optional: Add underline on hover */
}

    #friend-name-input {
        width: calc(100% - 22px);
        margin-top: 10px;
        padding: 10px;
        border: none;
        border-radius: 5px;
        background-color: #333;
        color: white;
    }

    #add-friend-button {
        margin-top: 10px;
        padding: 10px;
        background-color: #ffae00;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        width: 100%;
    }

    #add-friend-button:hover {
        background-color: #ffae00;
    }

    #toggle-friend-list {
        cursor: pointer;
        color: #ffae00;
        text-align: center;
        margin-top: 10px;
    }
        #new-quests-box {
        position: fixed;
        bottom: 5px;
        left: 5px;
        width: 300px;
        background-color: rgba(0, 0, 0, 0.9);
        color: white;
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        overflow: hidden;
        z-index: 1000;
        font-family: 'Roboto', sans-serif;
    }

    #new-quests-box .header {
        background-color: #ff9800;
        padding: 15px;
        font-size: 20px;
        font-weight: bold;
        text-align: center;
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
        position: relative;
    }

    #toggle-quests {
        position: absolute;
        right: 15px;
        top: 15px;
        cursor: pointer;
        font-size: 18px;
    }

    #new-quests-box .content {
        padding: 15px;
    }

    #new-quests-box .quest {
        margin-bottom: 15px;
        padding: 15px;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        transition: transform 0.2s, box-shadow 0.3s;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        display: flex;
        flex-direction: column;
    }

    #new-quests-box .quest:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
    }

    #new-quests-box .quest h3 {
        margin: 0;
        font-size: 18px;
        color: #ff9800;
    }

    #new-quests-box .quest p {
        margin: 10px 0;
        font-size: 14px;
        color: #ccc;
    }

    #new-quests-box .quest .reward-image {
        width: 30px;
        height: 30px;
        transition: transform 0.2s;
        align-self: flex-end;
    }

    #new-quests-box .quest .reward-image:hover {
        transform: scale(1.1);
    }

    #new-quests-box .quest-progress {
        height: 20px;
        background-color: rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        overflow: hidden;
        margin-top: 10px;
        position: relative;
    }

    #new-quests-box .quest-progress div {
        height: 100%;
        background-color: #ff9800;
        width: 50%; /* Example progress, should be dynamically set */
        position: absolute;
        top: 0;
        left: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
        color: white;
    }

    #new-quests-box .quest .button-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
    }

    #new-quests-box .quest button {
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        padding: 10px 20px;
        font-size: 14px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    #new-quests-box .quest button:hover {
        background-color: #0056b3;
    }

    #new-quests-box .quest .claim-button {
        background-color: #28a745;
    }

    #new-quests-box .quest .claim-button:hover {
        background-color: #218838;
    }

    #new-quests-box .quest button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }
	</style>
</head>
<body>
    <!-- Video Background -->
    <video id="video-background" autoplay muted loop>
        <source src="Event/Eventvideo.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <!-- Menu -->
    <div class="menu">
        <div class="menu-items">
            <a href="home.html">Home</a>
            <a href="Store.html">Store</a>
            <a href="event.html">Event</a>
            <a href="Team Builder.html">Team Builder</a>
            <a href="statistics.html">Statistics</a>
        </div>
    </div>

    <button class="battlepass-button" onclick="window.location.href='battlepass.html'">
        <img src="Event/Void Event.jpeg" alt="Battlepass">
        <span>Battlepass</span>
    </button>
    
    <div class="play-button-container">
        <a href="Game Modes.html" class="play-button">Play</a>
    </div>
</div>
	<!-- User Profile Info -->
    <div id="profile-info" onclick="toggleProfileMenu()">
        <span id="username-display"></span>
        <img id="profile-image" class="icon-image" src="Icons/Birdie.png" alt="Profile Icon">
    </div>
    
    <div class="currency-container">
        <div id="currency-amount"></div>
        <div class="currency-icon">
            <img src="res/img/fm.png" alt="Currency Icon">
        </div>
    </div>
    <div class="cm-container">
        <div id="cm-amount"></div>
        <div class="cm-icon">
            <img src="res/img/cm.png" alt="CM">
        </div>
    </div>

	<!-- Profile Menu Pop-up -->
	<div id="profile-menu" class="profile-menu">
		<ul>
			<li onclick="profile()">Profile</li>
			<li onclick="openChangeIconModal()">Change Icon</li>
			<li onclick="viewCollection()">Collection</li>
			<li onclick="logOut()">Log Out</li>
		</ul>
	</div>

	
    <!-- Modal for Changing Profile Icon -->
    <div id="change-icon-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeChangeIconModal()">&times;</span>
            <h2>Select Your Profile Icon</h2>
            <div id="icon-list">
                <!-- Icons will be dynamically loaded here -->
            </div>
        </div>
    </div>
    <!-- Champion Selector -->
    <div id="champion-selector-container">
        <div id="champion-selector">
            <a href="ch/Julia.html"><img src="Icons/Julia.png" alt="Julia" class="champion-image"></a>
            <a href="ch/Birdie.html"><img src="Icons/Birdie.png" alt="Birdie" class="champion-image"></a>
            <a href="ch/Erron Black.html"><img src="Icons/Erron Black.png" alt="Erron Black" class="champion-image"></a>
            <a href="ch/Cham Cham.html"><img src="Icons/Cham Cham.png" alt="Cham Cham" class="champion-image"></a>
            <a href="ch/Morrigan.html"><img src="Icons/Morrigan.png" alt="Morrigan" class="champion-image"></a>
            <a href="ch/Jun.html"><img src="Icons/Jun.png" alt="Jun" class="champion-image"></a>
            <a href="ch/Reptile.html"><img src="Icons/Reptile.png" alt="Reptile" class="champion-image"></a>
            <a href="ch/Akuma.html"><img src="Icons/Akuma.png" alt="Akuma" class="champion-image"></a>
            <a href="ch/Elphelt.html"><img src="Icons/Elphelt.png" alt="Elphelt" class="champion-image"></a>
            <a href="ch/Kotal Kahn.html"><img src="Icons/Kotal Kahn.png" alt="Kotal Kahn" class="champion-image"></a>
            <a href="ch/Scorpion.html"><img src="Icons/Scorpion.png" alt="Scorpion" class="champion-image"></a>
            <a href="ch/Peacock.html"><img src="Icons/Peacock.png" alt="Peacock" class="champion-image"></a>
            <a href="ch/Angel.html"><img src="Icons/Angel.png" alt="Angel" class="champion-image"></a>
            <a href="ch/Astaroth.html"><img src="Icons/Astaroth.png" alt="Astaroth" class="champion-image"></a>
            <a href="ch/Ibuki.html"><img src="Icons/Ibuki.png" alt="Ibuki" class="champion-image"></a>
            <a href="ch/R Mika.html"><img src="Icons/R.Mika.png" alt="R.Mika" class="champion-image"></a>
            <a href="ch/Raiden.html"><img src="Icons/Raiden.png" alt="Raiden" class="champion-image"></a>
            <a href="ch/Yugo.html"><img src="Icons/Yugo.png" alt="Yugo" class="champion-image"></a>
            <a href="ch/Talim.html"><img src="Icons/Talim.png" alt="Talim" class="champion-image"></a>
            <a href="ch/Noel.html"><img src="Icons/Noel.png" alt="Noel" class="champion-image"></a>
            <a href="ch/Blanka.html"><img src="Icons/Blanka.png" alt="Blanka" class="champion-image"></a>
            <a href="ch/Nina.html"><img src="Icons/Nina.png" alt="Nina" class="champion-image"></a>
            <a href="ch/Ayane.html"><img src="Icons/Ayane.png" alt="Ayane" class="champion-image"></a>
            <a href="ch/Siegfried.html"><img src="Icons/Siegfried.png" alt="Siegfried" class="champion-image"></a>
            <a href="ch/Shoma.html"><img src="Icons/Shoma.png" alt="Shoma" class="champion-image"></a>
			<a href="ch/Juri.html"><img src="Icons/Juri.png" alt="Juri" class="champion-image"></a>
			<a href="ch/Sub Zero.html"><img src="Icons/Sub Zero.png" alt="Sub Zero" class="champion-image"></a>
			<a href="ch/Christie.html"><img src="Icons/Christie.png" alt="Christie" class="champion-image"></a>
			<a href="ch/Kokoro.html"><img src="Icons/Kokoro.png" alt="Kokoro" class="champion-image"></a>
			<a href="ch/Eagle.html"><img src="Icons/Eagle.png" alt="Eagle" class="champion-image"></a>
			<a href="ch/Sophitia.html"><img src="Icons/Sophitia.png" alt="default-icon" class="champion-image"></a>
			<a href="ch/Shizumaru.html"><img src="Icons/Shizumaru.png" alt="default-icon" class="champion-image" ></a>
			<a href="ch/Kagome.html"><img src="Icons/Kagome.png" alt="default-icon" class="champion-image"></a>
            <a href="ch/Kabal.html"><img src="Icons/Kabal.png" alt="default-icon" class="champion-image"></a>
            <a href="ch/Kuma.html"><img src="Icons/Kuma.png" alt="Kuma" class="champion-image"></a>
            <a href="ch/Alice.html"><img src="Icons/Alice.png" alt="Alice" class="champion-image"></a>
            <a href="ch/Shinnok.html"><img src="Icons/Shinnok.png" alt="Shinnok" class="champion-image"></a>
            <a href="ch/FANG.html"><img src="Icons/FANG.png" alt="FANG" class="champion-image"></a>
            <a href="ch/Lili.html"><img src="Icons/Lili.png" alt="Lili" class="champion-image gray" onclick="return false;"></a>
            <a href="ch/Mega Man.html"><img src="Icons/Mega Man.png" alt="Mega Man" class="champion-image gray" onclick="return false;"></a>
            <a href="ch/Mai.html"><img src="Icons/Mai.png" alt="Mai" class="champion-image gray" onclick="return false;"></a>
        </div>
    </div>
    <div id="new-quests-box">
    <div class="header">
        Quests
        <span id="toggle-quests" onclick="toggleQuests()">&#9660;</span> <!-- Down arrow -->
    </div>
    <div class="content">
            <!-- Quests will be dynamically loaded here -->
        </div>
    </div>
    <div id="friend-list-container">
        <div id="toggle-friend-list">Toggle Friend List</div>
        <div id="friend-list">
            <ul id="friend-list-ul"></ul>
            <input type="text" id="friend-name-input" placeholder="Enter friend's username">
            <button id="add-friend-button">Add Friend</button>
        </div>
    </div>
<script>
    function profile() {
         window.location.href = 'Profile.html';
        }
	function viewCollection() {
         window.location.href = 'Collection.html';
        }	
	document.addEventListener('DOMContentLoaded', function () {
			var video = document.getElementById('video-background');
			if (video) {
				video.playbackRate = 1.0; // Set playback speed to 50%
				video.play(); // Start playing the video
			}
    });
    function toggleQuests() {
        const content = document.querySelector('#new-quests-box .content');
        const toggleButton = document.getElementById('toggle-quests');
        if (content.style.display === 'none') {
            content.style.display = 'block';
            toggleButton.innerHTML = '&#9660;'; // Down arrow
        } else {
            content.style.display = 'none';
            toggleButton.innerHTML = '&#9650;'; // Up arrow
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        // Initially hide the content
        document.querySelector('#new-quests-box .content').style.display = 'none';
        document.getElementById('toggle-quests').innerHTML = '&#9650;'; // Up arrow
    });
</script>
</body>
</html>